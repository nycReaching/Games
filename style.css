/* style.css - Neon Abyss Refresh */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

/* --- Base Variables (Neon Abyss Theme) --- */
:root {
    --bg-main: #0F0C29;
    --bg-panel: #24243E;
    --bg-panel-accent: #302B63;
    --text-primary: #F2F2F2;
    --text-secondary: #A9A9D8;
    --accent-blue: #00E5FF;
    --accent-pink: #FF00AA;
    --accent-yellow: #FFD60A;
    --accent-green: #00FFAB;
    --accent-orange: #FF8C00;
    --accent-red: #FF3E41;
    --shop-cost-text: #0F0C29;
    
    /* Multiplier Colors */
    --multiplier-2x-color: #00E5FF;
    --multiplier-3x-color: #A855F7;
    --multiplier-5x-color: #FF00AA;
    
    /* Schrodinger Effect Color */
    --schrodinger-glow: var(--accent-green);

    --font-primary: 'Poppins', sans-serif;
    --border-radius-main: 10px;
    --border-radius-small: 6px;
    --shadow-subtle: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-strong: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* --- Cosmic Mode Theme --- */
body.cosmic-theme {
    --bg-main: #000000;
    --bg-panel: #191970;
    --bg-panel-accent: #4169E1;
    --text-primary: #E6E6FA;
    --text-secondary: #B0C4DE;
    --accent-blue: #ADD8E6;
    --accent-pink: #FF69B4;
    --accent-yellow: #FFFF00;
    --shop-cost-text: #000000;
    --multiplier-5x-color: #FF69B4;
}

/* --- Quantum Mode Theme --- */
body.quantum-theme {
    --bg-main: #0A191E;
    --bg-panel: #133A41;
    --bg-panel-accent: #1B525F;
    --text-primary: #E0FFF9;
    --text-secondary: #93C1B4;
    --accent-green: #39FF14;
    --accent-yellow: #F1FA8C;
    --accent-blue: #7DF9FF;
    --schrodinger-glow: #39FF14;
}


/* --- Animations --- */
@keyframes popIn {
    0% { opacity: 0; transform: translateY(15px) scale(0.95); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes pulseWarningBorder {
    0%, 100% { border-color: var(--accent-red); box-shadow: 0 0 5px var(--accent-red); }
    50% { border-color: var(--accent-orange); box-shadow: 0 0 8px var(--accent-orange); }
}

/* --- General Styles --- */
body {
    font-family: var(--font-primary);
    background: linear-gradient(to right, var(--bg-main), var(--bg-panel));
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    min-height: 100vh;
    color: var(--text-primary);
    padding: 15px 15px 160px 15px; /* Increased padding-bottom for taller nav bar */
    box-sizing: border-box;
    transition: background 0.5s ease;
    overflow-x: hidden;
}

/* --- Game Title Styling --- */
#game-main-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: 0 auto 10px auto;
    transition: all 0.3s ease-in-out;
}
#game-main-title.upgrade-mode-active {
    font-size: 20px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--accent-yellow);
    text-shadow: 0 0 5px var(--accent-yellow);
}

.main-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    width: 100%;
    max-width: 420px;
}

/* --- Panel Styling --- */
.game, .modal-window {
    background: var(--bg-panel);
    border-radius: var(--border-radius-main);
    border: 1px solid var(--bg-panel-accent);
    box-shadow: var(--shadow-strong);
    padding: 12px;
    transition: background 0.3s ease, border-color 0.3s ease;
    box-sizing: border-box;
}

/* --- Game Area --- */
.game {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    width: 100%;
    text-align: center;
}
.game.food-warning {
    background: #450a0a !important;
    border-color: var(--accent-red) !important;
}
.game.food-warning .food-meter-icon, .game.food-warning .food-meter-value { color: var(--text-primary); }

/* NEW: Top Stats Bar */
.top-stats-bar {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto;
    gap: 8px;
    width: 100%;
    margin-bottom: 12px;
    align-items: center;
}
.coin-display {
    grid-column: 1 / -1; /* Span full width */
    font-size: 24px;
    font-weight: 700;
    color: var(--accent-yellow);
    text-align: center;
    padding: 4px;
    background: rgba(0,0,0,0.2);
    border-radius: var(--border-radius-small);
}
.coin-display span { margin-right: 4px; }


/* Meters (Food & Power) */
.power-meter-container, .food-meter-container { 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    width: 100%; 
}
.power-meter-bar, .food-meter { 
    flex-grow: 1;
    height: 14px; 
    background-color: var(--bg-main); 
    border: 1px solid var(--bg-panel-accent); 
    border-radius: var(--border-radius-small); 
    overflow: hidden; 
}
.power-meter-fill { height: 100%; background: linear-gradient(to right, var(--accent-yellow), var(--accent-orange)); transition: width 0.4s ease; }
.food-meter-fill { height: 100%; background: linear-gradient(to right, var(--accent-green), #059669); transition: width 0.4s ease; }
#power-meter-indicator-icon, .food-meter-icon { font-size: 20px; flex-shrink: 0;}
.power-penalty-indicator { font-size: 12px; }
.quantum-indicator { color: var(--accent-green); }
.cosmic-indicator { color: var(--accent-pink); }
.next-power-bill-display, .food-meter-value { font-size: 10px; color: var(--text-secondary); flex-shrink: 0; }
.food-icon-area { display: flex; flex-direction: column; align-items: center; width: 35px; }


/* Slot Grid - LARGER */
.slot-grid {
    display: inline-grid;
    grid-template-columns: repeat(4, clamp(65px, 20vw, 80px));
    gap: clamp(8px, 2vw, 12px);
    margin-bottom: 12px;
}
.slot-cell {
    width: 100%;
    aspect-ratio: 1 / 1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: clamp(30px, 9vw, 40px);
    background: var(--bg-panel-accent);
    border: 1px solid var(--bg-main);
    border-radius: var(--border-radius-small);
    position: relative;
    cursor: default;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.3s ease;
    box-shadow: var(--shadow-subtle);
}
.slot-cell.anim-popIn { animation: popIn 0.4s ease-out forwards; opacity: 0; }
.slot-cell:hover { transform: translateY(-2px); box-shadow: var(--shadow-strong); }
.slot-cell.clickable-food { cursor: pointer; border-color: var(--accent-green); }
.slot-cell.clickable-cat { cursor: pointer; border-color: var(--accent-pink); }

/* Text inside Slot Cells */
.slot-cell .payout-text { display: none; }
.slot-cell .base-value-text { position: absolute; top: 2px; left: 3px; font-size: 12px; font-weight: 600; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); pointer-events: none; }
.multiplier-value-text { position: absolute; top: 2px; right: 3px; font-size: 14px; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); pointer-events: none; }

/* Cell States */
.slot-cell.top-right-locked { background-color: var(--accent-orange); border-color: var(--accent-yellow); }
.lock-icon { position: absolute; top: -2px; right: -2px; font-size: 16px; z-index: 20; }
.lock-icon.locked-state { color: var(--accent-yellow); }
.lock-icon.no-locks { opacity: 0.5; color: var(--text-secondary); }

/* Payout Number Styling */
.base-value-text.base-value-base { color: var(--text-secondary); }
.base-value-text.base-value-buffed { color: var(--accent-yellow); }
.base-value-text.base-value-in-multi-2x,
.base-value-text.base-value-in-multi-3x,
.base-value-text.base-value-in-multi-5x { color: var(--accent-yellow); font-size: 14px; font-weight: 700; }
.slot-cell.multi-2x { background-color: rgba(0, 229, 255, 0.2); border-color: var(--multiplier-2x-color); }
.slot-cell.multi-3x { background-color: rgba(168, 85, 247, 0.2); border-color: var(--multiplier-3x-color); }
.slot-cell.multi-5x { background-color: rgba(255, 0, 170, 0.2); border-color: var(--multiplier-5x-color); }
.slot-cell.multi-2x .multiplier-value-text { color: var(--multiplier-2x-color); }
.slot-cell.multi-3x .multiplier-value-text { color: var(--multiplier-3x-color); }
.slot-cell.multi-5x .multiplier-value-text { color: var(--multiplier-5x-color); }

/* Schrodinger Cat Effect */
.schrodinger-cat-effect {
    box-shadow: 0 0 10px var(--schrodinger-glow), inset 0 0 6px var(--schrodinger-glow) !important;
    border: 1px dashed var(--schrodinger-glow) !important;
}
.schrodinger-cat-effect::after { content: "üêà"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 40px; z-index: 5; pointer-events: none; color: transparent; background: linear-gradient(45deg, var(--schrodinger-glow), var(--accent-blue)); -webkit-background-clip: text; background-clip: text; opacity: 0.8; }

/* Win Displays */
.win-display, .phone-message-display { font-size: 14px; font-weight: 500; min-height: 20px; text-align: center; margin-bottom: 4px; }
.win-display { color: var(--accent-yellow); }
.win-display.game-over { color: var(--accent-red); font-size: 16px; font-weight: bold; }
.phone-message-display.friendly, .phone-message-display.profit { color: var(--accent-green); }
.phone-message-display.loss { color: var(--accent-red); }
.phone-message-display.takeout-confirm { color: var(--accent-blue); }

/* Controls & Buttons - LARGER */
.controls { display: flex; gap: 10px; align-items: stretch; justify-content: center; margin: 8px 0; width: 100%; }
.btn { padding: 12px 18px; font-size: 16px; border: none; border-radius: var(--border-radius-small); cursor: pointer; transition: all 0.2s ease; box-shadow: var(--shadow-subtle); font-weight: 600; text-transform: uppercase; background: var(--accent-blue); color: var(--bg-main); }
.btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: var(--shadow-strong); filter: brightness(1.1); }
.btn:disabled { cursor: not-allowed; filter: brightness(0.6); }
.btn-spin { flex-grow: 1; }
.btn-lucky { flex-shrink: 0; font-size: 16px; padding: 12px; }
.btn-lucky.active { background: var(--accent-pink); }
.btn-spin.btn-spin-lucky { background: var(--accent-pink); }
.btn.btn-spin-bill-unpaid { animation: pulseWarningBorder 1.2s infinite; background: var(--accent-red); }

/* --- Fixed Bottom Navigation Bar --- */
.bottom-nav-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: var(--bg-panel);
    border-top: 1px solid var(--bg-panel-accent);
    box-shadow: 0 -4px 10px rgba(0,0,0,0.2);
    z-index: 500;
    padding: 8px 10px;
    box-sizing: border-box;
}
.bottom-utility-section { display: flex; flex-direction: column; gap: 8px; width: 100%; }
.status-effects-window {
    padding: 4px;
    width: 100%; 
    min-height: 28px;
    display: flex; 
    justify-content: center; 
    align-items: center;
    gap: 4px; 
    flex-wrap: wrap;
}
.status-effect-item {
    min-height: 18px; 
    display: flex; 
    flex-direction: row; 
    justify-content: center; 
    align-items: center; 
    gap: 4px;
    flex: 1; 
    min-width: 38px;
    background: var(--bg-main);
    padding: 3px 5px;
    border-radius: var(--border-radius-small);
}
.buff-emoji { font-size: 14px; }
.buff-countdown { font-size: 12px; font-weight: bold; color: var(--accent-yellow); }
.buff-value { font-size: 12px; font-weight: bold; color: var(--accent-green); }

/* NEW: Player Item Bar */
.player-item-bar {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 4px 0;
}
.player-item {
    position: relative;
    width: 44px;
    height: 44px;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--bg-panel-accent);
    border: 1px solid var(--bg-main);
    border-radius: var(--border-radius-small);
}
.player-item.clickable {
    cursor: pointer;
    border-color: var(--accent-blue);
    transition: all 0.2s ease;
}
.player-item.clickable:hover {
    transform: scale(1.05);
    border-color: var(--accent-pink);
}
.player-item.disabled {
    filter: grayscale(1);
    opacity: 0.6;
    cursor: not-allowed;
    border-color: var(--bg-main);
}
.player-item.inventory-item-gift {
    border-color: var(--accent-yellow);
    box-shadow: 0 0 5px var(--accent-yellow);
}
.player-item-emoji {
    font-size: 24px;
}
.player-item-count {
    position: absolute;
    bottom: -2px;
    right: -2px;
    background: var(--accent-yellow);
    color: var(--shop-cost-text);
    font-size: 10px;
    font-weight: bold;
    padding: 1px 4px;
    border-radius: 4px;
    border: 1px solid var(--bg-panel);
}


.bottom-controls-bar { display: flex; justify-content: space-around; gap: 6px; width: 100%; }
.utility-trigger { flex: 1; display: flex; justify-content: center; align-items: center; }
.utility-btn {
    font-size: 24px;
    width: 48px;
    height: 48px;
    border-radius: var(--border-radius-main);
    background-color: var(--bg-panel-accent);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid var(--bg-main);
    color: var(--text-primary);
}
.utility-btn:hover { background-color: var(--bg-main); color: var(--accent-blue); }
.utility-btn.toggled-off { background-color: var(--bg-main); color: var(--text-secondary); border-color: #111; }

/* --- Modals --- */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.3s ease; padding: 15px; box-sizing: border-box; }
.modal-overlay.hidden { opacity: 0; pointer-events: none; }
.modal-window { width: 100%; max-width: 500px; max-height: 90vh; position: relative; display: flex; flex-direction: column; }
.modal-title { font-size: 18px; color: var(--accent-blue); text-align: center; margin: 0 0 15px 0; padding-bottom: 8px; border-bottom: 1px solid var(--accent-blue); }
.modal-close-btn { position: absolute; top: 4px; right: 8px; font-size: 28px; color: var(--text-secondary); background: none; border: none; cursor: pointer; z-index: 1001; }
.modal-close-btn:hover { color: var(--accent-pink); }
.modal-content { overflow-y: auto; font-size: 14px; line-height: 1.6; padding: 8px; }
.modal-content strong { color: var(--accent-yellow); }

/* Shop Modal */
#shop-modal-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
.shop-item-btn {
    padding: 8px;
    font-size: 13px;
    border: 1px solid transparent;
    border-radius: var(--border-radius-small);
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 500;
    text-align: center;
    background-color: var(--bg-panel-accent);
    color: var(--text-primary);
    box-shadow: var(--shadow-subtle);
}
.shop-item-cost {
    font-weight: bold;
    display: block;
    margin-top: 4px;
    color: var(--shop-cost-text);
    background: var(--accent-yellow);
    padding: 2px 4px;
    border-radius: 4px;
}
.shop-item-btn:hover:not(:disabled) { transform: translateY(-2px); border-color: var(--accent-blue); }
.shop-item-btn:disabled { filter: grayscale(0.7) brightness(0.7); cursor: not-allowed; }

/* Phone Modal */
#phone-modal-content .btn { width: 80%; margin: 10px auto; display: block; }
#investments-btn { background: var(--accent-green); }
#takeout-area { background: var(--accent-orange); }
.investment-ui, .takeout-ui { display: flex; flex-direction: column; gap: 12px; padding: 15px; }
.investment-ui input[type="range"], .takeout-ui input[type="range"] { accent-color: var(--accent-pink); }
.investment-ui #invest-amount-display, .takeout-ui #takeout-amount-display { font-size: 18px; font-weight: bold; text-align: center; }

/* Pet Modal */
#pet-modal-content { display: flex; flex-direction: column; justify-content: flex-start; align-items: center; padding: 4px; min-height: 220px; }
.companions-container { display: flex; flex-direction: row; justify-content: space-around; align-items: flex-start; width: 100%; gap: 15px; }
.companion-info-wrapper { flex: 1; text-align: center; }
.pet-info-container { text-align: center; }
.pet-status-emoji { font-size: 48px; }
.pet-description { font-size: 13px; color: var(--text-primary); min-height: 18px; font-weight: 500; margin-top: 4px; }
.pet-bottom-area { width: 100%; text-align: center; margin-top: 8px; }
#pet-toy-display { font-size: 22px; }
.pet-food-consumption { font-size: 11px; color: var(--text-secondary); }
.alien-visitor-text { font-size: 14px; font-weight: bold; color: var(--accent-green); line-height: 1.3; text-align: center; }
.alien-emoji-large { font-size: 48px; }

/* Guide Modal */
#guide-icons-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-width: 200px; margin: 12px auto; }
.guide-icon { font-size: 36px; cursor: pointer; transition: transform 0.2s ease; }
.guide-icon:hover { transform: scale(1.15); color: var(--accent-pink); }
#guide-back-btn { display: block; width: 80%; margin: 0 auto 15px auto; }
.guide-topic-content h4 { font-size: 16px; color: var(--accent-blue); margin-top: 12px; margin-bottom: 8px; border-bottom: 1px solid var(--bg-panel-accent); padding-bottom: 4px; }
.guide-topic-content ul { list-style-type: disc; margin-left: 18px; margin-bottom: 8px; }

/* Gift Modal */
#gift-choice-content h4 { font-size: 20px; color: var(--accent-yellow); text-align: center; border: none; }
.gift-choices-container { display: flex; flex-direction: column; gap: 12px; align-items: center; }
